<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui">
    <ui:composition template="../main.xhtml" >

        <ui:define name="center">
            <h:form >
                <p:dataTable  rowIndexVar="row" value="#{frontUserPersonalBondIncomeDetail.srcHoldPersonalBond.frontUserIncomeProportionEntitys}" var="fontUserIncomes_var">
                    <p:column style="width:16px">
                        <p:rowToggler/>
                    </p:column>
                    <p:column  headerText="序号" style="width:30px">
                        <h:outputText value="#{row + 1}"/> 
                    </p:column>
                    <p:column headerText="份数">
                        <h:outputLabel value="#{fontUserIncomes_var.copiesNum}" />
                    </p:column> 
                    <p:column headerText="收益比例">
                        <h:outputLabel value="#{fontUserIncomes_var.proportion}" converter="BigDecimalConverter"/>
                    </p:column>
                    <p:rowExpansion>
                        <p:dataTable   rowIndexVar="row" value="#{fontUserIncomes_var.repayItems}" var="frontUserIncomeDetails_var">
                            <p:column  headerText="序号" style="width:30px">
                                <h:outputText value="#{row + 1}"/> 
                            </p:column>
                            <p:column  headerText="期数"  style="width:30px">
                                <h:outputLabel value="#{frontUserIncomeDetails_var.periodNum}"/>
                            </p:column>
                            <p:column  headerText="本金">
                                <h:outputLabel value="#{frontUserIncomeDetails_var.principal}" converter="BigDecimalConverter"/>
                            </p:column>
                            <p:column  headerText="利息">
                                <h:outputLabel value="#{frontUserIncomeDetails_var.interest}" converter="BigDecimalConverter"/>
                            </p:column>
                            <p:column  headerText="应付">
                                <h:outputLabel value="#{frontUserIncomeDetails_var.subTatal}" converter="BigDecimalConverter"/>
                            </p:column>
                            <p:column  headerText="结算时间">
                                <h:outputLabel value="#{frontUserIncomeDetails_var.settlementTime}" converter="DateConverter"/>
                            </p:column>
                            <p:column style="width:40px" headerText="还本">
                                <p:commandLink  id="payPrincipal_id"  styleClass="ui-icon ui-icon-calculator"  immediate="true">
                                    <f:setPropertyActionListener value="#{frontUserBond_var}" target="#{frontUserAccount.targetHoldPersonalBond}"/>
                                </p:commandLink>
                                <p:tooltip for="payPrincipal_id" value="还本"/>
                            </p:column>
                            <p:column style="width:40px" headerText="付息">
                                <p:commandLink  id="payInterest_id"  styleClass="ui-icon ui-icon-calculator"  immediate="true">
                                    <f:setPropertyActionListener value="#{frontUserBond_var}" target="#{frontUserAccount.targetHoldPersonalBond}"/>
                                </p:commandLink>
                                <p:tooltip for="payInterest_id" value="付息"/>
                            </p:column>
                            <p:column style="width:80px" headerText="还本付息" >
                                <p:commandLink  id="payAll_id"  styleClass="ui-icon ui-icon-calculator"  immediate="true" >
                                    <f:setPropertyActionListener value="#{frontUserBond_var}" target="#{frontUserAccount.targetHoldPersonalBond}"/>
                                </p:commandLink>
                                <p:tooltip for="payAll_id" value="还本付息"/>
                            </p:column>
                        </p:dataTable>
                    </p:rowExpansion>
                    <p:column headerText="转让" style="width:40px">
                        <p:commandLink  id="transfer_id"  styleClass="ui-icon ui-icon-search" action="#{frontUserPersonalBondIncomeDetail.toTransferPersonalPage()}" immediate="true">
                            <f:setPropertyActionListener value="#{fontUserIncomes_var}" target="#{frontUserPersonalBondIncomeDetail.targetIncomeProportion}"/>
                        </p:commandLink>
                        <p:tooltip for="transfer_id" value="债权转让"/>
                    </p:column>
                </p:dataTable>
            </h:form>
        </ui:define>
    </ui:composition>
</html>
